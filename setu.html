<!DOCTYPE html>
<html lnag="zh">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width initial-scale=1.0">
        <meta name="author" content="wlys">
        <title>随机色图</title>
        <script src="js/jquery-3.4.1.js"></script>
        <link rel="stylesheet" href="css/style1.css">
        <link rel="shortcut icon" href="img/favicon.ico">
    </head>
    <body>
        <ul id="text"></ul>
        标签:
        <ul id="tags"></ul>
        <a href="https://api.lolicon.app/#/setu">试用API</a>
        <img src="" id="show">
        <script>
            $(function () {
                var $show = $("#show");
                var $text = $("#text");
                var $tags = $("#tags")
                var parameter = {
                    r18: 2
                }
                $.ajax({
                    type: "GET",
                    url: "https://api.lolicon.app/setu/",
                    data: parameter,
                    success: function(data){
                        console.log(data)
                        if(data["code"] = "0" ){
                        $show.attr("src", data["data"][0]["url"])
                        $text.append("<li>作者uid:"+data["data"][0]["uid"]+"</li>")
                        $text.append("<li>图片pid:"+data["data"][0]["pid"]+"</li>")
                        $text.append("<li>r18:"+data["data"][0]["r18"]+"</li>")
                        $.each(data["data"][0]["tags"], function(i, tag){
                            $tags.append("<li>"+tag+"<li>")
                        })}
                        else{
                            alert("发生错误:"+data["msg"])
                        }
                        
                    },
                    error: function(){
                        alert("获取失败，请稍后再试！")
                    }
                })
            })
        </script>
    </body>
</html>
