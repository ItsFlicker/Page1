<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width initial-scale=1.0">
    <meta name="author" content="wlys">
    <title>wlys—index</title>
    <link rel="stylesheet" href="css/style1.css">
    <link rel="shortcut icon" href="img/favicon.ico">
    <style>
        body {
            background-image: url("img/bg.jpg");
            background-repeat: no-repeat;
        }
    </style>
    <script src="js/jquery-3.4.1.js"></script>
    <script src="js/MerryChristmas.js"></script>
    <script src="js/Eggs.js"></script>
</head>
<body>
    <header>
        <nav>
        <ul>
            <li><a href="#" onclick="document.getElementById('egg').className='dh'" style="color: red">主页</a></li>
            <li><a href="programs.html"  style="color: red">小程序</a></li>
            <li class="hide" id="egg"><a href="#" onclick="open(location, '_self').close();">Egg</a></li>
            <li class="desktop"><a href="download.html"  style="color: red">下载</a></li>
            <li class="desktop"><a href="video.html" style="color: red">视频</a></li>
        </ul>
        </nav>
    </header>
    <section style="margin-left: 2%;">
        <div class="fd">
            C
        </div>
        <br/>
        <div class="fd">
            C语言是一门面向过程、抽象化的通用程序设计语言，广泛应用于底层开发。<br/>
            C语言能以简易的方式编译、处理低级存储器。C语言是仅产生少量的机器语言以及不需要任何运行环境支持便能运行的高效率程序设计语言。<br/>
            尽管C语言提供了许多低级处理的功能，但仍然保持着跨平台的特性，以一个标准规格写出的C语言程序可在包括一些类似嵌入式处理器以及超级计算机等作业平台的许多计算机平台上进行编译。
        </div>
        <br/>
        <div class="fd">
            Python
        </div>
        <br/>
        <div class="fd">
            Python是一种计算机程序设计语言，是一种面向对象的动态类型语言，最初被设计用于编写自动化脚本(shell)。<br/>
            随着版本的不断更新和语言新功能的添加，越来越多被用于独立的、大型项目的开发。
        </div><br/>
        <h4 class="bold">天气查询:</h4>
        <button id="getweather">查询当前城市天气</button>
        <ul id="weathershow" class="fd"></ul>
    </section>
    <footer>
    </footer>
    <script>
        $(function () {
            var $weathershow = $("#weathershow");
            var parameter = {
                location: 'auto_ip',
                key: '216168dcbeeb4a9ba1dd70f153ac4463'
            };

            $("#getweather").on("click", function () {
                $.ajax({
                    type: 'GET',
                    url: 'https://free-api.heweather.net/s6/weather/now',
                    data: parameter,
                    success: function (weather) {
                        var now = weather.HeWeather6[0].now;
                        $weathershow.append("<li>当前温度:"+now.tmp+"摄氏度</li><br/>");
                        $weathershow.append("<li>体感温度:"+now.fl+"摄氏度</li><br/>");
                        $weathershow.append("<li>当前天气状况:"+now.cond_txt+"</li><br/>");
                        $weathershow.append("<li>当前风向:"+now.wind_dir+"</li><br/>");
                        $weathershow.append("<li>当前风力:"+now.wind_sc+"级</li><br/>");
                        $("#getweather").fadeOut();
                        $weathershow.append("<button id='newbtn'>查询生活指数</button>");
                        $("#newbtn").on("click", function () {
                            var result = '';
                            $.ajax({
                                type: 'GET',
                                url: 'https://free-api.heweather.net/s6/weather/lifestyle',
                                data: parameter,
                                success: function (life) {
                                    var lifestyles = life.HeWeather6[0].lifestyle;
                                    $.each(lifestyles, function (i, lifestyle) {
                                        result += lifestyle.txt;
                                    });
                                    $("#newbtn").fadeOut();
                                    $weathershow.append(result);
                                },
                                error: function () {
                                    alert("获取失败，请稍后再试");
                                }
                            });
                        })
                    },
                    error: function () {
                        alert("获取失败，请稍后再试");
                    }
                });
            });
        })
    </script>
</body>
</html>
